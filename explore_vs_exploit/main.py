#!/usr/bin/python3

import sys
import os
import numpy as np

# Add the subfolder to the system path
sys.path.append(os.path.dirname(os.path.relpath("../")))

from explore_vs_exploit.restuarant import restuarant
from explore_vs_exploit.explore_vs_exploit_problem import explore_vs_exploit_problem
from explore_vs_exploit.algorithms import random_algorithm, user_select_algorithm, win_stick_lose_switch

def main():
    print("Stopping Problem")
    print("Select an algorithm:")
    print("1. Random")
    print("2. User Select")
    print("3. Win-stick-lose-switch")

    algorithm = input("Enter the number of the algorithm: ")

    if algorithm == "1":
        a = random_algorithm()
    elif algorithm == "2":
        a = user_select_algorithm()
    elif algorithm == "3":
        a = win_stick_lose_switch()
    else:
        print("Invalid algorithm")

        return 1

    N_restuarants = int(input("Enter the number of restuarants: "))
    N_visits = int(input("Enter the number of restuarants: "))
    problem = explore_vs_exploit_problem(N_visits, N_restuarants)


    print(f"Final total of wins: {a.solve(problem)}")

    print("Restuarant's probabilty of winning:")

    for i in range(N_restuarants):
        print(f"{i}: {problem.restuarants[i].win_probability}")

    print(f"Best average score: {problem.get_best_restuarant().win_probability * N_visits}")
    print(f"Average score: {np.mean([problem.restuarants[i].win_probability for i in range(N_restuarants)]) * N_visits}")

    return 0


if __name__ == "__main__":
    main()
